{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/ramson/Developer/GitHub/production/grub-dash-front-end/src/orders/OrderEdit.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { deleteOrder, readOrder, updateOrder } from \"../utils/api\";\nimport OrderForm from \"./OrderForm\";\nimport ErrorAlert from \"../layout/ErrorAlert\";\n\nfunction OrderEdit() {\n  _s();\n\n  const history = useHistory();\n  const {\n    orderId\n  } = useParams();\n  const [order, setOrder] = useState({});\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const abortController = new AbortController();\n    readOrder(orderId, abortController.signal).then(setOrder).catch(setError);\n    return () => abortController.abort();\n  }, [orderId]);\n\n  function submitHandler(updatedOrder) {\n    updateOrder(updatedOrder).then(savedOrder => history.push(`/orders/${savedOrder.id}`)).catch(setError);\n  }\n\n  function cancelHandler() {\n    history.goBack();\n  }\n\n  function deleteHandler() {\n    const confirmed = window.confirm(\"Delete this order?\\n\\nYou will not be able to recover it.\");\n\n    if (confirmed) {\n      deleteOrder(order.id).then(() => history.push(\"/dashboard\")).catch(setError);\n    }\n  }\n\n  const child = order.id ? /*#__PURE__*/_jsxDEV(OrderForm, {\n    order: order,\n    setOrder: setOrder,\n    onCancel: cancelHandler,\n    onSubmit: submitHandler,\n    readOnly: order.status === \"delivered\",\n    showStatus: true,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mr-auto\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-secondary mr-2\",\n        onClick: cancelHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oi oi-x\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), \" Cancel\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        disabled: order.status === \"delivered\" || order.dishes.length === 0,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oi oi-check\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 11\n        }, this), \" Submit\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: \"btn btn-danger\",\n        title: \"Delete Order\",\n        disabled: order.status !== \"pending\",\n        onClick: deleteHandler,\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"oi oi-trash\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"main\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Edit Order\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ErrorAlert, {\n      error: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), child]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n}\n\n_s(OrderEdit, \"rkGNT+psVZiYCjSfVdJ3+qdPLXI=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = OrderEdit;\nexport default OrderEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"OrderEdit\");","map":{"version":3,"sources":["/Users/ramson/Developer/GitHub/production/grub-dash-front-end/src/orders/OrderEdit.js"],"names":["React","useEffect","useState","useHistory","useParams","deleteOrder","readOrder","updateOrder","OrderForm","ErrorAlert","OrderEdit","history","orderId","order","setOrder","error","setError","abortController","AbortController","signal","then","catch","abort","submitHandler","updatedOrder","savedOrder","push","id","cancelHandler","goBack","deleteHandler","confirmed","window","confirm","child","status","dishes","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useHistory, useParams } from \"react-router-dom\";\nimport { deleteOrder, readOrder, updateOrder } from \"../utils/api\";\nimport OrderForm from \"./OrderForm\";\nimport ErrorAlert from \"../layout/ErrorAlert\";\n\nfunction OrderEdit() {\n  const history = useHistory();\n  const { orderId } = useParams();\n\n  const [order, setOrder] = useState({});\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    const abortController = new AbortController();\n    readOrder(orderId, abortController.signal).then(setOrder).catch(setError);\n    return () => abortController.abort();\n  }, [orderId]);\n\n  function submitHandler(updatedOrder) {\n    updateOrder(updatedOrder)\n      .then((savedOrder) => history.push(`/orders/${savedOrder.id}`))\n      .catch(setError);\n  }\n\n  function cancelHandler() {\n    history.goBack();\n  }\n\n  function deleteHandler() {\n    const confirmed = window.confirm(\n      \"Delete this order?\\n\\nYou will not be able to recover it.\"\n    );\n    if (confirmed) {\n      deleteOrder(order.id)\n        .then(() => history.push(\"/dashboard\"))\n        .catch(setError);\n    }\n  }\n\n  const child = order.id ? (\n    <OrderForm\n      order={order}\n      setOrder={setOrder}\n      onCancel={cancelHandler}\n      onSubmit={submitHandler}\n      readOnly={order.status === \"delivered\"}\n      showStatus={true}\n    >\n      <div className=\"mr-auto\">\n        <button\n          type=\"button\"\n          className=\"btn btn-secondary mr-2\"\n          onClick={cancelHandler}\n        >\n          <span className=\"oi oi-x\" /> Cancel\n        </button>\n        <button\n          type=\"submit\"\n          className=\"btn btn-primary\"\n          disabled={order.status === \"delivered\" || order.dishes.length === 0}\n        >\n          <span className=\"oi oi-check\" /> Submit\n        </button>\n      </div>\n      <div className=\"col-auto\">\n        <button\n          type=\"button\"\n          className=\"btn btn-danger\"\n          title=\"Delete Order\"\n          disabled={order.status !== \"pending\"}\n          onClick={deleteHandler}\n        >\n          <span className=\"oi oi-trash\" />\n        </button>\n      </div>\n    </OrderForm>\n  ) : (\n    <p>Loading...</p>\n  );\n\n  return (\n    <main>\n      <h1>Edit Order</h1>\n      <ErrorAlert error={error} />\n      {child}\n    </main>\n  );\n}\n\nexport default OrderEdit;\n"]},"metadata":{},"sourceType":"module"}